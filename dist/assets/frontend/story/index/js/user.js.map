{"version":3,"sources":["../../../../../../assets/frontend/story/index/js/user.js"],"names":["$","on","event","preventDefault","ajax","type","url","attr","dataType","contentType","done","data","hasOwnProperty","notify","i","length","message","setTimeout","location","href","window","protocol","host","fail","CKEDITOR","replace","removeClass","rating","displayOnly","size","stars","showCaption","showClear","max","min","animate","form","gate","instances","story_information","getData","find","each","val","addClass","promise","data_sent","serializeObject","console","log","jQuery"],"mappings":"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","file":"user.js","sourcesContent":["/**\n * This <emosi.ekspresif> project created by :\n * Name         : syafiq\n * Date / Time  : 04 December 2016, 8:08 AM.\n * Email        : syafiq.rezpector@gmail.com\n * Github       : syafiqq\n */\n(function ($)\n{\n    /*\n     Fullscreen background\n     */\n    $(function ()\n    {\n        $(\"a#sign-out\").on('click', function (event)\n        {\n            event.preventDefault();\n            $.ajax({\n                type: 'post',\n                url: $(this).attr('href'),\n                dataType: 'json',\n                contentType: 'application/x-www-form-urlencoded; charset=UTF-8; X-Requested-With: XMLHttpRequest'\n            })\n                .done(function (data)\n                {\n                    if (data.hasOwnProperty('data'))\n                    {\n                        if (data['data'].hasOwnProperty('notify'))\n                        {\n                            var notify = data['data']['notify'];\n                            for (var i = -1; ++i < notify.length;)\n                            {\n                                $.notify({message: notify[i][0]}, {type: notify[i][1]});\n                            }\n                        }\n                    }\n                    if (data.hasOwnProperty('code'))\n                    {\n                        if (data['code'] == 200)\n                        {\n                            setTimeout(function ()\n                            {\n                                location.href = window.location.protocol + '//' + window.location.host\n                            }, 2000);\n                        }\n                    }\n\n                })\n                .fail(function ()\n                {\n                    $.notify({\n                        message: 'Error', url: window.location.protocol + '//' + window.location.host\n                    }, {\n                        // settings\n                        type: 'danger'\n                    });\n                })\n\n\n        });\n        CKEDITOR.replace('story_information');\n\n        $('input[type=\"text\"], input[type=\"password\"], input#generate-rating, textarea').on('focus', function ()\n        {\n            $(this).removeClass('input-error');\n        });\n\n        $('input#generate-rating').rating({\n            displayOnly: false,\n            size: 'sm',\n            stars: 10,\n            showCaption: false,\n            showClear: false,\n            max: 10,\n            min: 1,\n            animate: true\n        });\n\n        $(\"form#tell_story\").on('submit', function (event)\n        {\n            event.preventDefault();\n            var form = $(this);\n            var gate = CKEDITOR.instances.story_information.getData().length > 0;\n            form.find('input[type=\"text\"]').each(function ()\n            {\n                if ($(this).val() == \"\")\n                {\n                    gate = false;\n                    $(this).addClass('input-error');\n                }\n                else\n                {\n                    $(this).removeClass('input-error');\n                }\n            }).promise().done(function ()\n            {\n                if (gate)\n                {\n                    var data_sent = form.serializeObject();\n                    data_sent['information'] = CKEDITOR.instances.story_information.getData();\n                    console.log(data_sent);\n                    $.ajax({\n                        type: form.attr('method'),\n                        url: form.attr('action'),\n                        data: data_sent,\n                        dataType: 'json',\n                        contentType: 'application/x-www-form-urlencoded; charset=UTF-8; X-Requested-With: XMLHttpRequest'\n                    })\n                        .done(function (data)\n                        {\n                            if (data.hasOwnProperty('data'))\n                            {\n                                if (data['data'].hasOwnProperty('notify'))\n                                {\n                                    var notify = data['data']['notify'];\n                                    for (var i = -1; ++i < notify.length;)\n                                    {\n                                        $.notify({message: notify[i][0]}, {type: notify[i][1]});\n                                    }\n                                }\n                            }\n                            if (data.hasOwnProperty('code'))\n                            {\n                                if (data['code'] == 200)\n                                {\n                                    if (data.hasOwnProperty('redirect'))\n                                    {\n                                        setTimeout(function ()\n                                        {\n                                            location.href = data['redirect'];\n                                            //location.href = window.location.protocol + '//' + window.location.host + '/emosi.ekspresif/dashboard'\n                                        }, 2000);\n                                    }\n                                }\n                            }\n\n                        })\n                        .fail(function ()\n                        {\n                            $.notify({\n                                message: 'Error'\n                            }, {\n                                // settings\n                                type: 'danger'\n                            });\n                        })\n                }\n            });\n        });\n\n\n        $('button#story_cancel').on('click', function ()\n        {\n            window.location.href = window.location.protocol + '//' + window.location.host + '/emosi.ekspresif/dashboard';\n        })\n    });\n\n    /*\n     * Run right away\n     * */\n})(jQuery);"]}