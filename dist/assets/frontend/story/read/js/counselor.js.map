{
  "version": 3,
  "sources": [
    "../../../../../../assets/frontend/story/read/js/counselor.js"
  ],
  "names": [
    "$",
    "on",
    "event",
    "preventDefault",
    "ajax",
    "type",
    "url",
    "attr",
    "dataType",
    "contentType",
    "done",
    "data",
    "hasOwnProperty",
    "notify",
    "i",
    "length",
    "message",
    "setTimeout",
    "location",
    "href",
    "window",
    "protocol",
    "host",
    "fail",
    "rating",
    "displayOnly",
    "size",
    "stars",
    "showCaption",
    "showClear",
    "max",
    "animate",
    "print",
    "globalStyles",
    "mediaPrint",
    "stylesheet",
    "noPrintSelector",
    "iframe",
    "append",
    "prepend",
    "manuallyCopyFormValues",
    "deferred",
    "Deferred",
    "timeout",
    "title",
    "doctype",
    "form",
    "data_sent",
    "serializeObject",
    "retrieveData",
    "storyID",
    "populateChat",
    "console",
    "log",
    "setInterval",
    "container",
    "empty",
    "_i",
    "_is",
    "chat",
    "jQuery"
  ],
  "mappings": "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",
  "file": "counselor.js",
  "sourcesContent": [
    "/**\n * This <emosi.ekspresif> project created by :\n * Name         : syafiq\n * Date / Time  : 04 December 2016, 8:08 AM.\n * Email        : syafiq.rezpector@gmail.com\n * Github       : syafiqq\n */\n(function ($)\n{\n    /*\n     Fullscreen background\n     */\n    $(function ()\n    {\n        $(\"a#sign-out\").on('click', function (event)\n        {\n            event.preventDefault();\n            $.ajax({\n                type: 'post',\n                url: $(this).attr('href'),\n                dataType: 'json',\n                contentType: 'application/x-www-form-urlencoded; charset=UTF-8; X-Requested-With: XMLHttpRequest'\n            })\n                .done(function (data)\n                {\n                    if (data.hasOwnProperty('data'))\n                    {\n                        if (data['data'].hasOwnProperty('notify'))\n                        {\n                            var notify = data['data']['notify'];\n                            for (var i = -1; ++i < notify.length;)\n                            {\n                                $.notify({message: notify[i][0]}, {type: notify[i][1]});\n                            }\n                        }\n                    }\n                    if (data.hasOwnProperty('code'))\n                    {\n                        if (data['code'] == 200)\n                        {\n                            setTimeout(function ()\n                            {\n                                location.href = window.location.protocol + '//' + window.location.host\n                            }, 2000);\n                        }\n                    }\n\n                })\n                .fail(function ()\n                {\n                    $.notify({\n                        message: 'Error', url: window.location.protocol + '//' + window.location.host\n                    }, {\n                        // settings\n                        type: 'danger'\n                    });\n                })\n\n\n        });\n\n        $('input#generate-rating').rating({\n            displayOnly: true,\n            size: 'xxs',\n            stars: 10,\n            showCaption: false,\n            showClear: false,\n            max: 10,\n            animate: false\n        });\n\n        $('a#do_print').on('click', function (event)\n        {\n            event.preventDefault();\n            $(\"div#print_field\").print({\n                globalStyles: true,\n                mediaPrint: false,\n                stylesheet: window.location.protocol + '//' + window.location.host + '/assets/frontend/bower_components/bootstrap/dist/css/bootstrap.min.css',\n                noPrintSelector: \".no-print\",\n                iframe: true,\n                append: null,\n                prepend: null,\n                manuallyCopyFormValues: true,\n                deferred: $.Deferred(),\n                timeout: 750,\n                title: null,\n                doctype: '<!doctype html>'\n            });\n        });\n\n        $(\"form#form_chat\").on('click', function (event)\n        {\n            event.preventDefault();\n            var form = $(this);\n            var data_sent = form.serializeObject();\n            if(data_sent['message'].length > 0)\n            {\n                $.ajax({\n                    type: form.attr('method'),\n                    url: form.attr('action'),\n                    data: data_sent,\n                    dataType: 'json',\n                    contentType: 'application/x-www-form-urlencoded; charset=UTF-8; X-Requested-With: XMLHttpRequest'\n                })\n                    .done(function (data)\n                    {\n                        if (data.hasOwnProperty('data'))\n                        {\n                            if (data['data'].hasOwnProperty('notify'))\n                            {\n                                var notify = data['data']['notify'];\n                                for (var i = -1; ++i < notify.length;)\n                                {\n                                    $.notify({message: notify[i][0]}, {type: notify[i][1]});\n                                }\n                            }\n                        }\n                        if (data.hasOwnProperty('code'))\n                        {\n                            if (data['code'] == 200)\n                            {\n                                retrieveData(storyID);\n                            }\n                        }\n                    })\n                    .fail(function ()\n                    {\n                        $.notify({\n                            message: 'Error', url: window.location.protocol + '//' + window.location.host\n                        }, {\n                            // settings\n                            type: 'danger'\n                        });\n                    })\n            }\n        });\n\n        function retrieveData(storyID)\n        {\n            $.ajax({\n                type: 'POST',\n                url: window.location.protocol + '//' + window.location.host + '/chat/getc?id='+storyID,\n                dataType: 'json',\n                contentType: 'application/x-www-form-urlencoded; charset=UTF-8; X-Requested-With: XMLHttpRequest'\n            })\n                .done(function (data)\n                {\n                    if (data.hasOwnProperty('chat'))\n                    {\n                        populateChat(data['chat']);\n                    }\n                })\n                .fail(function ()\n                {\n                    console.log('ERROR');\n                });\n        }\n\n        setInterval(function() {\n            retrieveData(storyID);\n        }, 5000);\n        retrieveData(storyID);\n        function populateChat(data)\n        {\n            var container = $('div#chat_container');\n            container.empty();\n            for(var _i = -1, _is = data.length; ++_i < _is;)\n            {\n                var chat = data[_i];\n                if(chat['assign']['isuser'])\n                {\n                    //right\n                    container.append('' +\n                        '<div class=\"direct-chat-msg right\">' +\n                            '<div class=\"direct-chat-info clearfix\">' +\n                                '<span class=\"direct-chat-name pull-right\">'+(chat['assign']['role'] === 'counselor' ? '<strong>[Counselor]</strong>' : \"\")+'&nbsp;&nbsp;<abbr title=\"'+chat['assign']['email']+'\">'+chat['assign']['username']+'</abbr></span>' +\n                                '<span class=\"direct-chat-timestamp pull-left\">'+chat['create_at']+'</span>' +\n                            '</div>'+\n                            '<img class=\"direct-chat-img\" src=\"'+chat['assign']['avatar']+'\" alt=\"Message User Image\" width=\"96px\">' +\n                            '<div class=\"direct-chat-text\">'\n                                + chat['text'] +\n                            '</div>' +\n                        '</div>'\n                    );\n                }\n                else\n                {\n                    container.append('' +\n                        '<div class=\"direct-chat-msg left\">' +\n                            '<div class=\"direct-chat-info clearfix\">' +\n                                '<span class=\"direct-chat-name pull-left\"><abbr title=\"'+chat['assign']['email']+'\">'+chat['assign']['username']+'</abbr>&nbsp;&nbsp;'+(chat['assign']['role'] === 'counselor' ? '<strong>[Counselor]</strong>' : \"\")+'</span>' +\n                                '<span class=\"direct-chat-timestamp pull-right\">'+chat['create_at']+'</span>' +\n                            '</div>'+\n                        '<img class=\"direct-chat-img\" src=\"'+chat['assign']['avatar']+'\" alt=\"Message User Image\" width=\"96px\">' +\n                            '<div class=\"direct-chat-text\">'\n                                + chat['text'] +\n                            '</div>' +\n                        '</div>'\n                    );\n                }\n            }\n        }\n    });\n    /*\n     * Run right away\n     * */\n})(jQuery);"
  ]
}